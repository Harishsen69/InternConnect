<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Apply Section</title>
    <link rel="stylesheet" href="ViewApply.css">
</head>

<body>
    <div class="maindiv">
        <div class="header" id="headtext">
            <h1>View Apply Section</h1>
        </div>

        <center>
            <input type="text" placeholder="Enter User Name" id="search">
            <button id="searchBtn">
                <span class="label">Search</span>
            </button>
        </center>

        <br><br>

        <center>
            <table border="2" id="tables">
                <tr>
                    <th>Username</th>
                    <th>Apply Company List</th>
                </tr>
            </table>
        </center>
    </div>

    <script>
        // Get stored application data from localStorage
        const appliedData = JSON.parse(localStorage.getItem("internshipApplications")) || [];

        const table = document.getElementById("tables");

        // Show all applied users initially
        appliedData.forEach(entry => {
            let row = table.insertRow();
            let cell1 = row.insertCell(0);
            let cell2 = row.insertCell(1);
            cell1.textContent = entry.name; // from Apply form's "yourName"
            cell2.textContent = entry.company;
        });

        // Search functionality
        document.getElementById("searchBtn").addEventListener("click", () => {
            const searchValue = document.getElementById("search").value.trim().toLowerCase();

            table.innerHTML = `
            <tr>
                <th>Username</th>
                <th>Apply Company List</th>
            </tr>
        `;

            appliedData
                .filter(entry => entry.name.toLowerCase().includes(searchValue))
                .forEach(entry => {
                    let row = table.insertRow();
                    let cell1 = row.insertCell(0);
                    let cell2 = row.insertCell(1);
                    cell1.textContent = entry.name;
                    cell2.textContent = entry.company;
                });
        });
    </script>

</body>

</html>